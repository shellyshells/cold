<!DOCTYPE html>
<html>
<head>
    <title>Health Metrics - Fridgy</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="icon" type="image/x-icon" href="image/logo.png">
</head>
<body>
    <nav class="nav">
        <ul class="nav-links">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
            <li><a href="food.html" class="nav-link">Food Storage</a></li>
            <li><a href="recipes.html" class="nav-link">Recipes</a></li>
            <li><a href="tracker.html" class="nav-link">Meal Tracker</a></li>
            <li><a href="health.html" class="nav-link">Health Metrics</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>Health Metrics</h1>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="healthPage.showTab('metrics', event)">Health Metrics</button>
            <button class="tab-btn" onclick="healthPage.showTab('steps', event)">Steps</button>
            <button class="tab-btn" onclick="healthPage.showTab('addictions', event)">Food Addictions</button>
        </div>

        <!-- Health Metrics Tab -->
        <div id="metrics-tab" class="tab-content active">
            <button class="btn" onclick="healthPage.showAddMetricForm()">Add Health Metric</button>

            <div id="add-metric-form" class="card hidden" style="margin-top: 1rem;">
                <h3>Add Health Metric</h3>
                <form id="metric-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Metric Type:</label>
                            <select id="metric-type" required>
                                <option value="weight">Weight (kg)</option>
                                <option value="bmi">BMI</option>
                                <option value="cholesterol">Cholesterol (mg/dL)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Value:</label>
                            <input type="number" id="metric-value" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label>Date:</label>
                            <input type="date" id="metric-date" required>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="healthPage.hideAddMetricForm()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Metric</button>
                    </div>
                </form>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <h2>Weight Trend</h2>
                <canvas id="weight-chart"></canvas>
            </div>

            <div class="card">
                <h2>BMI Trend</h2>
                <canvas id="bmi-chart"></canvas>
            </div>

            <div class="card">
                <h2>Cholesterol Trend</h2>
                <canvas id="cholesterol-chart"></canvas>
            </div>

            <div class="card">
                <h2>Recent Metrics</h2>
                <div id="metrics-list"></div>
            </div>
        </div>

        <!-- Steps Tab -->
        <div id="steps-tab" class="tab-content">
            <button class="btn" onclick="healthPage.showAddStepsForm()">Add Steps</button>

            <div id="add-steps-form" class="card hidden" style="margin-top: 1rem;">
                <h3>Add Steps</h3>
                <form id="steps-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Steps:</label>
                            <input type="number" id="steps-value" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>Date:</label>
                            <input type="date" id="steps-date" required>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="healthPage.hideAddStepsForm()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Steps</button>
                    </div>
                </form>
            </div>

            <div class="card" style="margin-top: 1rem;">
                <h2>Steps Trend</h2>
                <canvas id="steps-chart"></canvas>
            </div>

            <div class="card">
                <h2>Today's Steps</h2>
                <div id="today-steps" style="font-size: 2rem; text-align: center; padding: 1rem;">
                    Loading...
                </div>
            </div>
        </div>

        <!-- Food Addictions Tab -->
        <div id="addictions-tab" class="tab-content">
            <button class="btn" onclick="healthPage.analyzeAddictions()">Analyze Addictions</button>

            <div class="card" style="margin-top: 1rem;">
                <h2>Addiction Analysis</h2>
                <div id="addiction-analysis"></div>
            </div>

            <div class="card">
                <h2>Sugar Consumption</h2>
                <canvas id="sugar-chart"></canvas>
            </div>

            <div class="card">
                <h2>Fat Consumption</h2>
                <canvas id="fat-chart"></canvas>
            </div>

            <div class="card">
                <h2>Most Consumed Foods</h2>
                <div id="food-frequency-list"></div>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/health.js"></script>
</body>
</html>

